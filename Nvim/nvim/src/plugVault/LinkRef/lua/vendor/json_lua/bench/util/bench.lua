local a={}local unpack=unpack or table.unpack;local b=string.format;function a.run(c,d,e)local f={}for g=1,d do local h=os.clock()e()table.insert(f,os.clock()-h)end;local i=0;for g,j in ipairs(f)do i=i+j end;i=i/#f;return{name=c,avg=i,min=math.min(unpack(f)),max=math.max(unpack(f)),all=f}end;function a.get_cpu_name()local k=io.open("/proc/cpuinfo","rb")if not k then return"unknown"end;local l=k:read("*a")return l:match("model name%s*:%s*(.-)\n")end;function a.print_system_info()print(b("Lua version   : %s",jit and jit.version or _VERSION))print(b("CPU name      : %s",a.get_cpu_name()))end;function a.print_results(m)local n=math.huge;for g,j in ipairs(m)do n=math.min(n,j.avg)end;for g,j in ipairs(m)do print(b("%-13s : %.03gs [x%1.3g] (min: %.03gs, max %.03gs)",j.name,j.avg,j.avg/n,j.min,j.max))end end;return a
