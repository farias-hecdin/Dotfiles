local a={}local b=require("code_runner.options")function a.floating(c)local d=b.get()local e=vim.api.nvim_create_buf(false,true)vim.api.nvim_buf_set_keymap(e,"t","<ESC>","<C-\\><C-n>",{silent=true})vim.api.nvim_buf_set_keymap(e,"n",d.float.close_key,"<CMD>q!<CR>",{silent=true})vim.api.nvim_buf_set_option(e,"filetype","crunner")local f=math.ceil(vim.api.nvim_get_option("lines")*d.float.height-4)local g=math.ceil(vim.api.nvim_get_option("columns")*d.float.width)local h=math.ceil((vim.api.nvim_get_option("lines")-f)*d.float.y-1)local i=math.ceil((vim.api.nvim_get_option("columns")-g)*d.float.x)local j={style="minimal",relative="editor",border=d.float.border,width=g,height=f,row=h,col=i}local k=vim.api.nvim_open_win(e,true,j)vim.fn.termopen(c)if d.startinsert then vim.cmd("startinsert")end;if d.wincmd then vim.cmd("wincmd p")end;vim.api.nvim_win_set_option(k,"winhl","Normal:"..d.float.float_hl..",FloatBorder:"..d.float.border_hl)vim.api.nvim_win_set_option(k,"winblend",d.float.blend)end;return a
