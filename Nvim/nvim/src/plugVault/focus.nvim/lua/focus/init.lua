local a=require('focus.modules.commands')local b=require('focus.modules.autocmd')local c=require('focus.modules.split')local d=require('focus.modules.functions')local e=require('focus.modules.resizer')local f={}local g={}g.config={enable=true,commands=true,autoresize={enable=true,width=0,height=0,minwidth=0,minheight=0,height_quickfix=10},split={bufnew=false,tmux=false},ui={number=false,relativenumber=false,hybridnumber=false,absolutenumber_unfocussed=false,cursorline=true,cursorcolumn=false,colorcolumn={enable=false,list='+1'},signcolumn=true,winhighlight=false}}g.setup=function(h)_G.Focus=g;h=f.setup_config(h)f.apply_config(h)if h~=nil and h.enable then b.setup(h)if h.commands then a.setup()end;if h.ui.winhighlight then if vim.fn.has('nvim-0.9')then vim.api.nvim_set_hl(0,'FocusedWindow',{link='VertSplit'})vim.api.nvim_set_hl(0,'UnfocusedWindow',{link='Normal'})else vim.highlight.link('FocusedWindow','VertSplit',true)vim.highlight.link('UnfocusedWindow','Normal',true)end;vim.wo.winhighlight='Normal:FocusedWindow,NormalNC:UnfocusedWindow'end;if h.autoresize.enable then g.resize()end end end;g.resize=function(i)local h=f.get_config()e.split_resizer(h,i)end;function g.split_nicely(j)local h=f.get_config()if j==nil then j=''end;c.split_nicely(j,h.bufnew)end;function g.split_command(k,j)local h=f.get_config()j=j or''c.split_command(k,j,h.split.tmux,h.split.bufnew)end;function g.split_cycle(l)local h=f.get_config()c.split_cycle(l,h.bufnew)end;function g.focus_enable()d.focus_enable()end;function g.focus_disable()d.focus_disable()end;function g.focus_toggle()d.focus_toggle()end;function g.focus_maximise()d.focus_maximise()end;function g.focus_equalise()d.focus_equalise()end;function g.focus_autoresize()d.focus_autoresize()end;function g.focus_max_or_equal()d.focus_max_or_equal()end;function g.focus_disable_window()vim.w.focus_disable=true;g.resize()end;function g.focus_enable_window()vim.w.focus_disable=false;g.resize()end;function g.focus_toggle_window()vim.w.focus_disable=not vim.w.focus_disable;g.resize()end;function g.focus_disable_buffer()vim.b.focus_disable=true;g.resize()end;function g.focus_enable_buffer()vim.b.focus_disable=false;g.resize()end;function g.focus_toggle_buffer()vim.b.focus_disable=not vim.b.focus_disable;g.resize()end;f.default_config=g.config;f.setup_config=function(h)vim.validate({config={h,'table',true}})h=vim.tbl_deep_extend('force',f.default_config,h or{})vim.validate({enable={h.enable,'boolean'},commands={h.commands,'boolean'},autoresize={h.autoresize,'table',true},split={h.split,'table',true},ui={h.split,'table',true}})vim.validate({['autoresize.enable']={h.autoresize.enable,'boolean'},['autoresize.width']={h.autoresize.width,'number'},['autoresize.height']={h.autoresize.height,'number'},['autoresize.minwidth']={h.autoresize.minwidth,'number'},['autoresize.minheight']={h.autoresize.minheight,'number'},['autoresize.height_quickfix']={h.autoresize.height_quickfix,'number'}})vim.validate({['split.bufnew']={h.split.bufnew,'boolean'},['split.tmux']={h.split.tmux,'boolean'}})vim.validate({['ui.number']={h.ui.number,'boolean'},['ui.relativenumber']={h.ui.relativenumber,'boolean'},['ui.hybridnumber']={h.ui.hybridnumber,'boolean'},['ui.absolutenumber_unfocussed']={h.ui.absolutenumber_unfocussed,'boolean'},['ui.cursorline']={h.ui.cursorline,'boolean'},['ui.cursorcolumn']={h.ui.cursorcolumn,'boolean'},['ui.colorcolumn']={h.ui.colorcolumn,'table',true},['ui.signcolumn']={h.ui.signcolumn,'boolean'},['ui.winhighlight']={h.ui.winhighlight,'boolean'}})vim.validate({['ui.colorcolumn.enable']={h.ui.colorcolumn.enable,'boolean'},['ui.colorcolumn.list']={h.ui.colorcolumn.list,'string'}})return h end;f.apply_config=function(h)g.config=h end;f.get_config=function(h)return vim.tbl_deep_extend('force',g.config,vim.b.focus_config or{},h or{})end;return g
