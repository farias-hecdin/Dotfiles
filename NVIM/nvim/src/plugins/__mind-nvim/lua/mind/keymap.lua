local a={}local b=require'mind.notify'.notify;a.KeymapSelector={NORMAL='normal',SELECTION='selection'}a.keymaps={selector=a.KeymapSelector.NORMAL,normal={},selection={}}a.init_keymaps=function(c)a.keymaps.normal=c.keymaps.normal;a.keymaps.selection=c.keymaps.selection end;a.set_keymap=function(d)a.keymaps.selector=d end;a.get_keymap=function()return a.keymaps[a.keymaps.selector]end;a.insert_keymaps=function(e,f,g,h,c)local i={}for j,k in pairs(a.keymaps.normal)do i[j]=true end;for j,k in pairs(a.keymaps.selection)do i[j]=true end;local l={get_tree=f,data_dir=g,save_tree=h,opts=c}for j,k in pairs(i)do vim.keymap.set('n',j,function()local m=a.get_keymap()if m==nil then b('no active keymap',vim.log.levels.WARN)return end;local n=m[j]if n==nil then b('no command bound to '..tostring(j),vim.log.levels.WARN)return end;n(l)end,{buffer=e,noremap=true,silent=true})end end;return a
