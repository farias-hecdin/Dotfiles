local a={}local function b()local c,d=pcall(require,'cmp')return c and d or{}end;local function e()local f,g=pcall(require,'luasnip')return f and g or{}end;function a.tab_complete(h)local d=b()return d.mapping(function(i)local j=vim.fn.col('.')-1;if d.visible()then d.select_next_item(h)elseif j==0 or vim.fn.getline('.'):sub(j,j):match('%s')then i()else d.complete()end end,{'i','s'})end;function a.select_prev_or_fallback(h)local d=b()return d.mapping(function(i)if d.visible()then d.select_prev_item(h)else i()end end,{'i','s'})end;function a.toggle_completion(k)k=k or{}local d=b()return d.mapping(function()if d.visible()then d.abort()else d.complete()end end,k.modes)end;function a.luasnip_jump_forward()local d=b()local g=e()return d.mapping(function(i)if g.jumpable(1)then g.jump(1)else i()end end,{'i','s'})end;function a.luasnip_jump_backward()local d=b()local g=e()return d.mapping(function(i)if g.jumpable(-1)then g.jump(-1)else i()end end,{'i','s'})end;function a.luasnip_supertab(h)local d=b()local g=e()return d.mapping(function(i)local j=vim.fn.col('.')-1;if d.visible()then d.select_next_item(h)elseif g.expand_or_jumpable()then g.expand_or_jump()elseif j==0 or vim.fn.getline('.'):sub(j,j):match('%s')then i()else d.complete()end end,{'i','s'})end;function a.luasnip_shift_supertab(h)local d=b()local g=e()return d.mapping(function(i)if d.visible()then d.select_prev_item(h)elseif g.jumpable(-1)then g.jump(-1)else i()end end,{'i','s'})end;function a.luasnip_next_or_expand(h)local d=b()local g=e()return d.mapping(function(i)if d.visible()then d.select_next_item(h)elseif g.expand_or_jumpable()then g.expand_or_jump()else i()end end,{'i','s'})end;function a.luasnip_next(h)local d=b()local g=e()return d.mapping(function(i)if d.visible()then d.select_next_item(h)elseif g.jumpable(1)then g.jump(1)else i()end end,{'i','s'})end;return a
