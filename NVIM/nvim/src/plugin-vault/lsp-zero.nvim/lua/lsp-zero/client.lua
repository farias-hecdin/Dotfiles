local a={}local b=vim.api.nvim_create_augroup('lsp_zero_start_client',{clear=true})function a.setup(c)if c.filetypes==nil then return end;local d;local e='Attach LSP server'local f={capabilities=vim.lsp.protocol.make_client_capabilities(),on_exit=vim.schedule_wrap(function()if d then pcall(vim.api.nvim_del_autocmd,d)end end)}local g=vim.tbl_deep_extend('force',f,c)local h=c.root_dir;if type(h)=='function'then g.root_dir=nil end;if c.on_exit then local i=c.on_exit;local j=f.on_exit;g.on_exit=function(...)j()i(...)end end;if g.name then e=string.format('Attach LSP: %s',g.name)end;local k=function()if h then g.root_dir=h()end;if g.root_dir then vim.lsp.start(g)end end;d=vim.api.nvim_create_autocmd('FileType',{group=b,pattern=g.filetypes,desc=e,callback=k})end;return a
