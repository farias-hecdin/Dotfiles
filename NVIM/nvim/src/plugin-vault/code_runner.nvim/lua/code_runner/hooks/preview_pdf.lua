local a=require("plenary.job")local b=require("code_runner.hooks.autocmd")function replaceElement(c,d)for e,f in ipairs(c)do if d[f]then c[e]=d[f]end end end;local function g(h,i,j)j=j or false;a:new({command=h.command,args=h.args,on_exit=vim.schedule_wrap(function(k,l)if l==1 then vim.notify("Could not comvert to PDF",vim.log.levels.ERROR)return end;if j then os.execute(h.preview_cmd.." "..i)end end)}):start()end;local m=function(h)b.stop_job()local n=vim.fn.expand("%:p")if n==nil then return end;local o=os.tmpname()..".pdf"if h.overwrite_output~=nil then o=h.overwrite_output.."/"..vim.fn.fnamemodify(n,":t:r")..".pdf"end;replaceElement(h.args,{["$fileName"]=n,["$tmpFile"]=o})local p=function()g(h,o)end;b.create_au_write(p)g(h,o,true)end;return{run=m}
