local a=vim.api;local b={cxx_l='//%s',cxx_b='/*%s*/',dbl_hash='##%s',dash='--%s',dash_bracket='--[[%s]]',handlebars='{{!--%s--}}',hash='#%s',hash_bracket='#[[%s]]',haskell_b='{-%s-}',fsharp_b='(*%s*)',html='<!--%s-->',latex='%%s',semicolon=';%s',lisp_l=';;%s',lisp_b='#|%s|#',twig='{#%s#}',vim='"%s',lean_b='/-%s-/'}local c=setmetatable({arduino={b.cxx_l,b.cxx_b},applescript={b.hash},astro={b.html},autohotkey={b.semicolon,b.cxx_b},bash={b.hash},beancount={b.semicolon},bib={b.latex},c={b.cxx_l,b.cxx_b},cabal={b.dash},cmake={b.hash,b.hash_bracket},conf={b.hash},conkyrc={b.dash,b.dash_bracket},coq={b.fsharp_b},cpp={b.cxx_l,b.cxx_b},cs={b.cxx_l,b.cxx_b},css={b.cxx_b,b.cxx_b},cuda={b.cxx_l,b.cxx_b},dart={b.cxx_l,b.cxx_b},dhall={b.dash,b.haskell_b},dosbatch={'REM%s'},dot={b.cxx_l,b.cxx_b},dts={b.cxx_l,b.cxx_b},editorconfig={b.hash},eelixir={b.html,b.html},elixir={b.hash},elm={b.dash,b.haskell_b},elvish={b.hash},faust={b.cxx_l,b.cxx_b},fennel={b.semicolon},fish={b.hash},func={b.lisp_l},fsharp={b.cxx_l,b.fsharp_b},gdb={b.hash},gdscript={b.hash},gitignore={b.hash},gleam={b.cxx_l},glsl={b.cxx_l,b.cxx_b},gnuplot={b.hash,b.hash_bracket},go={b.cxx_l,b.cxx_b},gomod={b.cxx_l},graphql={b.hash},groovy={b.cxx_l,b.cxx_b},handlebars={b.handlebars,b.handlebars},haskell={b.dash,b.haskell_b},haxe={b.cxx_l,b.cxx_b},heex={b.html,b.html},html={b.html,b.html},htmldjango={b.html,b.html},idris={b.dash,b.haskell_b},idris2={b.dash,b.haskell_b},ini={b.hash},java={b.cxx_l,b.cxx_b},javascript={b.cxx_l,b.cxx_b},javascriptreact={b.cxx_l,b.cxx_b},jsonc={b.cxx_l},jsonnet={b.cxx_l,b.cxx_b},julia={b.hash,'#=%s=#'},kotlin={b.cxx_l,b.cxx_b},lean={b.dash,b.lean_b},lean3={b.dash,b.lean_b},lidris={b.dash,b.haskell_b},lilypond={b.latex,'%{%s%}'},lisp={b.lisp_l,b.lisp_b},lua={b.dash,b.dash_bracket},luau={b.dash,b.dash_bracket},markdown={b.html,b.html},make={b.hash},mbsyncrc={b.dbl_hash},mermaid={'%%%s'},meson={b.hash},nextflow={b.cxx_l,b.cxx_b},nim={b.hash,'#[%s]#'},nix={b.hash,b.cxx_b},nu={b.hash},ocaml={b.fsharp_b,b.fsharp_b},odin={b.cxx_l,b.cxx_b},plantuml={"'%s","/'%s'/"},purescript={b.dash,b.haskell_b},python={b.hash},php={b.cxx_l,b.cxx_b},prisma={b.cxx_l},proto={b.cxx_l,b.cxx_b},quarto={b.html,b.html},r={b.hash},racket={b.lisp_l,b.lisp_b},rasi={b.cxx_l,b.cxx_b},readline={b.hash},rego={b.hash},remind={b.hash},rescript={b.cxx_l,b.cxx_b},robot={b.hash},ron={b.cxx_l,b.cxx_b},ruby={b.hash},rust={b.cxx_l,b.cxx_b},sbt={b.cxx_l,b.cxx_b},scala={b.cxx_l,b.cxx_b},scheme={b.lisp_l,b.lisp_b},sh={b.hash},solidity={b.cxx_l,b.cxx_b},supercollider={b.cxx_l,b.cxx_b},sql={b.dash,b.cxx_b},stata={b.cxx_l,b.cxx_b},svelte={b.html,b.html},swift={b.cxx_l,b.cxx_b},sxhkdrc={b.hash},tablegen={b.cxx_l,b.cxx_b},teal={b.dash,b.dash_bracket},terraform={b.hash,b.cxx_b},tex={b.latex},template={b.dbl_hash},tmux={b.hash},toml={b.hash},twig={b.twig,b.twig},typescript={b.cxx_l,b.cxx_b},typescriptreact={b.cxx_l,b.cxx_b},typst={b.cxx_l,b.cxx_b},v={b.cxx_l,b.cxx_b},verilog={b.cxx_l},vhdl={b.dash},vim={b.vim},vifm={b.vim},vue={b.html,b.html},xdefaults={'!%s'},xml={b.html,b.html},xonsh={b.hash},yaml={b.hash},yuck={b.lisp_l},zig={b.cxx_l}},{__index=function(d,e)local f,g=string.match(e,'^(.-)%.(.*)')if not(f or g)then return nil end;return d[f]or d[g]end})local h={}function h.set(i,j)c[i]=type(j)=='string'and{j}or j;return h end;function h.get(i,k)local l=c[i]if not l then return nil end;if not k then return vim.deepcopy(l)end;return l[k]end;function h.contains(m,n)for i,o in pairs(m:children())do if i~='comment'and o:contains(n)then return h.contains(o,n)end end;return m end;function h.calculate(p)local q,r=pcall(vim.treesitter.get_parser,a.nvim_get_current_buf())if not q then return h.get(vim.bo.filetype,p.ctype)end;local i=h.contains(r,{p.range.srow-1,p.range.scol,p.range.erow-1,p.range.ecol}):lang()return h.get(i,p.ctype)or h.get(vim.bo.filetype,p.ctype)end;return setmetatable(h,{__newindex=function(d,e,s)d.set(e,s)end,__call=function(d,t,u)for v,i in ipairs(t)do d.set(i,u)end;return d end})
