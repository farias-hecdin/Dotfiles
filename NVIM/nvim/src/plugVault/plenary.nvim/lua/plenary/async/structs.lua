local a={}local b={}b.__index=b;function b.new()return setmetatable({first=0,last=-1},b)end;function b:pushleft(c)local d=self.first-1;self.first=d;self[d]=c end;function b:pushright(c)local e=self.last+1;self.last=e;self[e]=c end;function b:popleft()local d=self.first;if d>self.last then return nil end;local c=self[d]self[d]=nil;self.first=d+1;return c end;function b:popright()local e=self.last;if self.first>e then return nil end;local c=self[e]self[e]=nil;self.last=e-1;return c end;function b:is_empty()return self:len()==0 end;function b:len()return self.last-self.first+1 end;function b:ipairs_left()local f=self.first;return function()local g=self[f]local h=f;if g then f=f+1;return h,g end end end;function b:ipairs_right()local f=self.last;return function()local g=self[f]local h=f;if g then f=f-1;return h,g end end end;function b:clear()for f,i in self:ipairs_left()do self[f]=nil end;self.first=0;self.last=-1 end;a.Deque=b;return a
