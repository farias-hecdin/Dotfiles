local a=vim.loop;local b=assert(a.fs_mkdtemp(a.os_tmpdir().."/XXXXXX"))local c=1e3;for d=1,c,1 do local e=assert(a.fs_open(b.."/"..tostring(d),a.constants.O_CREAT+a.constants.O_EXCL,511))assert(a.fs_close(e))end;local f=a.hrtime()for d=1,c,1 do local g=assert(a.fs_stat(b.."/"..tostring(d)))end;print("time to stat "..tostring(c).." files (sync):",(a.hrtime()-f)/1e6,"ms")local h=0;local function i(j,k)h=h+1;if h==c then print("time to stat "..tostring(c).." files (async):",(a.hrtime()-f)/1e6,"ms")vim.schedule(function()vim.fn.delete(b,"rf")end)end;assert(k,j)end;f=a.hrtime()for d=1,c,1 do a.fs_stat(b.."/"..tostring(d),i)end
