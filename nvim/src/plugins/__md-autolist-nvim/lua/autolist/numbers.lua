local a={I=1,V=5,X=10,L=50,C=100,D=500,M=1000}local b={1,5,10,50,100,500,1000}local c={"I","V","X","L","C","D","M"}local d={}function d.arabic2roman(e)e=tonumber(e)if not e or e~=e then error("Unable to convert to number")end;if e==math.huge then error("Unable to convert infinity")end;e=math.floor(e)if e<=0 then return e end;local f=""for g=#b,1,-1 do local h=b[g]while e-h>=0 and e>0 do f=f..c[g]e=e-h end;for i=1,g-1 do local j=b[i]if e-(h-j)>=0 and e<h and e>0 and h-j~=j then f=f..c[i]..c[g]e=e-(h-j)break end end end;return f end;function d.roman2arabic(e)e=e:upper()local f=0;local g=1;while g<=e:len()do local k=e:sub(g,g)if k~=" "then local l=a[k]or error("Unknown Roman Numeral '"..k.."'")local m=e:sub(g+1,g+1)local n=a[m]if m and n then if n>l then f=f+n-l;g=g+1 else f=f+l end else f=f+l end end;g=g+1 end;return f end;function d.roman_add(o,p)return d.arabic2roman(d.roman2arabic(o)+p)end;return d
