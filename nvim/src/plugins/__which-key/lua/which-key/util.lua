local a={}function a.count(b)local c=0;for d,d in pairs(b)do c=c+1 end;return c end;function a.get_mode()local e=vim.api.nvim_get_mode().mode;e=e:gsub(a.t("<C-V>"),"v")e=e:gsub(a.t("<C-S>"),"s")return e:lower()end;function a.is_empty(b)return a.count(b)==0 end;function a.t(f)local c=vim.api.nvim_replace_termcodes(f,false,true,true):gsub("\128\254X","\128")return c end;local g={1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,6,6,1,1}function a.parse_keys(h)local i={}local j=""local k=1;local l=nil;for m=1,#h,1 do local n=h:sub(m,m)if l then if k==0 then if n==">"then table.insert(i,l..">")j=""k=1;l=nil elseif n=="-"then k=1 end else k=0 end;if l then l=l..n end elseif n=="<"then l="<"k=0 else if k==1 then k=g[n:byte()+1]end;j=j..n;k=k-1;if k==0 then table.insert(i,j)j=""k=1 end end end;local c={keys=a.t(h),internal={},notation={}}for m,o in pairs(i)do if o==" "then o="<space>"end;if m==1 and vim.g.mapleader and a.t(o)==a.t(vim.g.mapleader)then o="<leader>"end;table.insert(c.internal,a.t(o))table.insert(c.notation,o)end;return c end;function a.parse_internal(h)local i={}local j=""local k=1;local p=false;for m=1,#h,1 do local n=h:sub(m,m)if not p then if k==1 and n=="\128"then k=3 elseif j=="\128"and n=="\252"then k=k+1 elseif k==1 then k=g[n:byte()+1]p=k>1 end end;j=j..n;k=k-1;if k==0 then table.insert(i,j)j=""k=1;p=false end end;return i end;function a.warn(q)vim.notify(q,vim.log.levels.WARN,{title="WhichKey"})end;function a.error(q)vim.notify(q,vim.log.levels.ERROR,{title="WhichKey"})end;function a.check_mode(e,r)if not("nvsxoiRct"):find(e)then a.error(string.format("Invalid mode %q for buf %d",e,r or 0))return false end;return true end;return a
