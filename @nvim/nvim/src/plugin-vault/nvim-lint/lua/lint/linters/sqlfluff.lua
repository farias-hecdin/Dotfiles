return{cmd="sqlfluff",args={"lint","--format=json","--dialect=postgres"},ignore_exitcode=true,stdin=false,parser=function(a,b)local c={}if#a>0 then local d,e=pcall(vim.json.decode,a)if not d then c={{filepath="stdin",violations={{source='sqlfluff',line_no=1,line_pos=1,code='jsonparsingerror',description=a}}}}else c=e end end;local f={}for b,g in ipairs(c)do for b,h in ipairs(g.violations)do table.insert(f,{source='sqlfluff',lnum=h.line_no-1,col=h.line_pos-1,severity=vim.diagnostic.severity.ERROR,message=h.description,user_data={lsp={code=h.code}}})end end;return f end}
