local a=require('gitsigns.config').config;local b={CacheEntry={}}local c=b.CacheEntry;function c:get_compare_rev(d)d=d or self.base;if d then return d end;if self.commit then if a._signs_staged_enable then return self.commit else return string.format('%s^',self.commit)end end;local e=self.git_obj.has_conflicts and 1 or 0;return string.format(':%d',e)end;function c:get_staged_compare_rev()return self.commit and string.format('%s^',self.commit)or'HEAD'end;function c:get_rev_bufname(f)f=f or self:get_compare_rev()return string.format('gitsigns://%s/%s:%s',self.git_obj.repo.gitdir,f,self.git_obj.relpath)end;function c:invalidate()self.compare_text=nil;self.compare_text_head=nil;self.hunks=nil;self.hunks_staged=nil end;function c.new(g)g.staged_diffs=g.staged_diffs or{}return setmetatable(g,{__index=c})end;function c:destroy()local h=self.gitdir_watcher;if h and not h:is_closing()then h:close()end end;b.cache={}function b.destroy(i)b.cache[i]:destroy()b.cache[i]=nil end;return b
