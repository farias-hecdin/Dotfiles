local a=require('cmp.utils.debug')local b={}b.group=vim.api.nvim_create_augroup('___cmp___',{clear=true})b.events={}b.subscribe=function(c,d)c=type(c)=='string'and{c}or c;for e,f in ipairs(c)do if not b.events[f]then b.events[f]={}vim.api.nvim_create_autocmd(f,{desc=('nvim-cmp: autocmd: %s'):format(f),group=b.group,callback=function()b.emit(f)end})end;table.insert(b.events[f],d)end;return function()for e,f in ipairs(c)do for g,h in ipairs(b.events[f])do if h==d then table.remove(b.events[f],g)break end end end end end;b.emit=function(f)a.log(' ')a.log(string.format('>>> %s',f))b.events[f]=b.events[f]or{}for e,d in ipairs(b.events[f])do d()end end;return b
