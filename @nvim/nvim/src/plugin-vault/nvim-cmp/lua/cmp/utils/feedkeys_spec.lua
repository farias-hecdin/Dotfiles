local a=require('cmp.utils.spec')local b=require('cmp.utils.keymap')local c=require('cmp.utils.feedkeys')describe('feedkeys',function()before_each(a.before)it('dot-repeat',function()local d;c.call(b.t('iaiueo<Esc>'),'nx',function()d=vim.fn.getreg('.')end)assert.are.equal(d,b.t('aiueo'))end)it('textwidth',function()vim.cmd([[setlocal textwidth=6]])c.call(b.t('iaiueo '),'nx')c.call(b.t('aaiueoaiueo'),'nx')assert.are.same(vim.api.nvim_buf_get_lines(0,0,-1,false),{'aiueo aiueoaiueo'})end)it('bacckspace',function()vim.cmd([[setlocal backspace=0]])c.call(b.t('iaiueo'),'nx')c.call(b.t('a<BS><BS>'),'nx')assert.are.same(vim.api.nvim_buf_get_lines(0,0,-1,false),{'aiu'})end)it('testability',function()c.call('i','n',function()c.call('','n',function()c.call('aiueo','in')end)c.call('','n',function()c.call(b.t('<BS><BS><BS><BS><BS>'),'in')end)c.call('','n',function()c.call(b.t('abcde'),'in')end)c.call('','n',function()c.call(b.t('<BS><BS><BS><BS><BS>'),'in')end)c.call('','n',function()c.call(b.t('12345'),'in')end)end)c.call('','x')assert.are.same(vim.api.nvim_buf_get_lines(0,0,-1,false),{'12345'})end)end)
