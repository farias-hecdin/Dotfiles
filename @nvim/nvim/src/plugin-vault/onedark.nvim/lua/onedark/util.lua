local a={}a.bg="#000000"a.fg="#ffffff"local function b(c)local d="[abcdef0-9][abcdef0-9]"local e="^#("..d..")("..d..")("..d..")$"c=string.lower(c)assert(string.find(c,e)~=nil,"hex_to_rgb: invalid hex_str: "..tostring(c))local f,g,h=string.match(c,e)return{tonumber(f,16),tonumber(g,16),tonumber(h,16)}end;function a.blend(i,j,k)j=b(j)i=b(i)local l=function(m)local n=k*i[m]+(1-k)*j[m]return math.floor(math.min(math.max(0,n),255)+0.5)end;return string.format("#%02X%02X%02X",l(1),l(2),l(3))end;function a.darken(d,o,j)return a.blend(d,j or a.bg,math.abs(o))end;function a.lighten(d,o,i)return a.blend(d,i or a.fg,math.abs(o))end;return a
