local a=require("gitsigns.hunks").Hunk;local b=require('gitsigns.git').Obj;local c={CacheEntry={},CacheObj={}}local d=c.CacheEntry;d.get_compare_rev=function(self,e)e=e or self.base;if e then return e end;if self.commit then return string.format('%s^',self.commit)end;local f=self.git_obj.has_conflicts and 1 or 0;return string.format(':%d',f)end;d.get_rev_bufname=function(self,g)g=g or self:get_compare_rev()return string.format('gitsigns://%s/%s:%s',self.git_obj.repo.gitdir,g,self.git_obj.relpath)end;d.invalidate=function(self)self.compare_text=nil;self.hunks=nil end;d.new=function(h)h.staged_diffs=h.staged_diffs or{}return setmetatable(h,{__index=d})end;d.destroy=function(self)local i=self.gitdir_watcher;if i and not i:is_closing()then i:close()end end;c.CacheObj.destroy=function(self,j)self[j]:destroy()self[j]=nil end;c.cache=setmetatable({},{__index=c.CacheObj})return c
