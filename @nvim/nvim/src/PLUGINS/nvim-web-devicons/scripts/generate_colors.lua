local a=vim.fn;if not jit then error"Neovim must be LuaJIT-enabled to source this script"end;if a.filereadable"lua/nvim-web-devicons.lua"==0 then error"lua/nvim-web-devicons.lua not found"end;local b,c=pcall(vim.fn["colortemplate#colorspace#approx"],"#000000")if not b then error(c.."\nPlease ensure lifepillar/vim-colortemplate is present in the runtimepath.")end;local d=255*7/8;local e=255*6/8;local f=255*5/8;local g=255/2;local h=255/3;local function i(j)local k,l,m=j:match"%#(%x%x)(%x%x)(%x%x)"k,l,m=tonumber("0x"..k),tonumber("0x"..l),tonumber("0x"..m)local n=0.299*k+0.587*l+0.114*m;if n<h then return j elseif n<g then k=bit.tohex(k/4*3):sub(-2)l=bit.tohex(l/4*3):sub(-2)m=bit.tohex(m/4*3):sub(-2)elseif n<f then k=bit.tohex(k/3*2):sub(-2)l=bit.tohex(l/3*2):sub(-2)m=bit.tohex(m/3*2):sub(-2)elseif n<e then k=bit.tohex(k/2):sub(-2)l=bit.tohex(l/2):sub(-2)m=bit.tohex(m/2):sub(-2)elseif n<d then k=bit.tohex(k/3):sub(-2)l=bit.tohex(l/3):sub(-2)m=bit.tohex(m/3):sub(-2)else k=bit.tohex(k/5):sub(-2)l=bit.tohex(l/5):sub(-2)m=bit.tohex(m/5):sub(-2)end;return string.format("#%s%s%s",k,l,m)end;local function o()vim.cmd":1"local p=0;while true do local q=a.search"^\\s*color ="if q<p then break end;p=q;local r=a.getline("."):match"%#......"if a.search"^\\s*cterm_color"<q then break end;if a.getline("."):find"%d"then a.setline(".",a.substitute(a.getline".","\\d\\+",function()return tostring(vim.fn["colortemplate#colorspace#approx"](r).index)end,""))end end end;local function s()local t=a.line"."-1;a.search"^}"local u=a.line"."local v=vim.api.nvim_buf_get_lines(a.bufnr(),t,u,true)for w=1,#v do if v[w]:find"^%s*color ="then v[w]=v[w]:gsub("%#%x+",function(x)return i(x)end)end end;table.insert(v,"")return v end;vim.cmd"noswapfile drop lua/nvim-web-devicons.lua"print"Generating file with icons for light backgrounds..."vim.cmd":1"if a.search"^local icons_by_filename"==0 then error"Table not found!"end;local v=s()if a.search"^local icons_by_file_extension"==0 then error"Table not found!"end;local y=s()table.insert(y,"return {")table.insert(y,"  icons_by_filename = icons_by_filename,")table.insert(y,"  icons_by_file_extension = icons_by_file_extension,")table.insert(y,"}")a.writefile(v,"lua/nvim-web-devicons-light.lua")a.writefile(y,"lua/nvim-web-devicons-light.lua","a")print"Finished creating new file!"print"Generating cterm colors for dark background...\n"o()vim.cmd"wall!"print"Finished!"if a.filereadable"lua/nvim-web-devicons-light.lua"==0 then error"lua/nvim-web-devicons-light.lua not found!"end;vim.cmd"noswapfile drop lua/nvim-web-devicons-light.lua"print"Generating cterm colors for light background...\n"o()vim.cmd":1"vim.cmd"wall!"print"Finished!\n"
